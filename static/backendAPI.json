{
  "openapi": "3.0.1",
  "info": {
    "title": "Mimeeq API",
    "description": "Mimeeq API.",
    "contact": {
      "email": "support@mimeeq.co.uk"
    },
    "license": {
      "name": "Apache 2.0",
      "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
    },
    "version": "1.0.0"
  },
  "externalDocs": {
    "description": "Find out more about Mimeeq Configurator",
    "url": "https://docs.mimeeq.com"
  },
  "servers": [
    {
      "url": "https://cjqo3924b3.execute-api.eu-central-1.amazonaws.com/api/cpq",
      "description": "Staging server"
    },
    {
      "url": "https://jrdgrq09nk.execute-api.eu-central-1.amazonaws.com/api/cpq",
      "description": "Production server"
    }
  ],
  "tags": [
    {
      "name": "products",
      "description": "Product API methods"
    }
  ],
  "components": {
    "securitySchemes": {
      "ApiKeyAuth": {
        "type": "apiKey",
        "in": "header",
        "name": "X-API-KEY"
      }
    },
    "schemas": {
      "MimeeqPriceLevel": {
        "description": "",
        "type": "object",
        "properties": {
          "quantityMin": {
            "description": "",
            "oneOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ]
          },
          "quantityMax": {
            "description": "",
            "oneOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ]
          },
          "price": {
            "description": "",
            "type": "number"
          },
          "pricePart": {
            "description": "",
            "type": "number"
          },
          "discount": {
            "type": "number"
          }
        }
      },
      "ProductPriceResponse": {
        "description": "",
        "type": "object",
        "properties": {
          "price": {
            "description": "Total price",
            "type": "number"
          },
          "oneTimePrice": {
            "description": "One time extra amount",
            "type": "number"
          },
          "levels": {
            "description": "Quantity breaks levels",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MimeeqPriceLevel"
            }
          },
          "currency": {
            "description": "Currency symbol",
            "type": "string"
          },
          "deliveryTime": {
            "description": "Delivery time for selected configuration",
            "type": "number"
          },
          "marketCostPriceMap": {
            "type": "object",
            "deprecated": true
          }
        }
      },
      "ProductInfoConfigurationItem": {
        "description": "",
        "type": "object",
        "properties": {
          "option": {
            "description": "",
            "type": "string"
          }
        }
      },
      "ProductInfoComponentItem": {
        "description": "",
        "type": "object",
        "properties": {
          "product": {
            "$ref": "#/components/schemas/MimeeqProductInfo"
          },
          "quantity": {
            "description": "",
            "type": "number"
          },
          "unitPrice": {
            "description": "Price for one unit",
            "type": "number"
          },
          "totalPrice": {
            "description": "Total price for selected quantity",
            "type": "number"
          }
        }
      },
      "MimeeqProduct": {
        "type": "object",
        "properties": {
          "name": {
            "description": "",
            "type": "string"
          },
          "code": {
            "description": "",
            "type": "string"
          },
          "description": {
            "description": "",
            "type": "string"
          },
          "configuration": {
            "description": "",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProductInfoConfigurationItem"
            }
          },
          "defaultImage": {
            "description": "",
            "type": "string"
          },
          "SKU": {
            "description": "",
            "type": "string"
          }
        }
      },
      "MimeeqProductInfo": {
        "allOf": [
          {
            "$ref": "#/components/schemas/MimeeqProduct"
          },
          {
            "type": "object",
            "properties": {
              "configuration": {
                "description": "",
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/ProductInfoConfigurationItem"
                }
              }
            }
          }
        ]
      },
      "ProductInfoResponse": {
        "description": "",
        "allOf": [
          {
            "$ref": "#/components/schemas/MimeeqProductInfo"
          },
          {
            "type": "object",
            "properties": {
              "status": {
                "description": "",
                "type": "string",
                "enum": [
                  "ACTIVE",
                  "INACTIVE"
                ]
              },
              "mode": {
                "description": "",
                "type": "string",
                "enum": [
                  "MODULAR",
                  "VARIANT",
                  "STANDARD"
                ]
              },
              "unitPrice": {
                "description": "Price for one unit",
                "type": "number"
              },
              "totalPrice": {
                "description": "Total price for selected quantity",
                "type": "number"
              },
              "deliveryInfo": {
                "description": "Information about when product can be delivered",
                "type": "string"
              },
              "components": {
                "description": "",
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/ProductInfoComponentItem"
                }
              }
            }
          }
        ]
      },
      "ProductListItem": {
        "allOf": [
          {
            "$ref": "#/components/schemas/MimeeqProduct"
          },
          {
            "type": "object",
            "properties": {
              "status": {
                "description": "",
                "type": "string",
                "enum": [
                  "ACTIVE",
                  "INACTIVE"
                ]
              },
              "mode": {
                "description": "",
                "type": "string",
                "enum": [
                  "MODULAR",
                  "VARIANT",
                  "STANDARD"
                ]
              }
            }
          }
        ]
      }
    }
  },
  "security": [
    {
      "ApiKeyAuth": []
    }
  ],
  "paths": {
    "/get-product-price": {
      "get": {
        "tags": [
          "product"
        ],
        "summary": "Returns the product price by product ID, short code and quantity",
        "description": "Returns the product price by product ID, short code and quantity",
        "operationId": "getProductPrice",
        "parameters": [
          {
            "name": "productId",
            "in": "query",
            "description": "Product ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "shortCode",
            "in": "query",
            "description": "Short code generated for selected configuration",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "quantity",
            "in": "query",
            "description": "Quantity",
            "required": true,
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductPriceResponse"
                }
              }
            }
          },
          "403": {
            "description": "Authentication failed.",
            "content": {}
          },
          "500": {
            "description": "Internal server error.",
            "content": {}
          }
        }
      }
    },
    "/get-product-info": {
      "get": {
        "tags": [
          "product"
        ],
        "summary": "Returns the product info",
        "description": "Gets product information based on short code.",
        "operationId": "getProductInfo",
        "parameters": [
          {
            "name": "shortCode",
            "in": "query",
            "description": "Short code generated for selected configuration",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "quantity",
            "in": "query",
            "description": "Quantity",
            "required": true,
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductInfoResponse"
                }
              }
            }
          },
          "403": {
            "description": "Authentication failed.",
            "content": {}
          },
          "500": {
            "description": "Internal server error.",
            "content": {}
          }
        }
      }
    },
    "/product": {
      "get": {
        "tags": [
          "products"
        ],
        "summary": "Returns the products list",
        "description": "Gets list of customer products",
        "operationId": "product",
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProductListItem"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid status value.",
            "content": {}
          },
          "500": {
            "description": "Internal server error.",
            "content": {}
          }
        }
      }
    }
  }
}

